import Head from "next/head";
import Header from "../components/Header";
import Banner from "../components/Banner";
import requests from "../utils/requests";
import Row from "../components/Row";
import Plateforms from "../components/Plateforms";
import Footer from "../components/Footer";
import { useAuthContext } from "../hooks/useAuthContext";

export default function Home({ trending, topRated }) {
  const { authIsReady } = useAuthContext();
  return (
    authIsReady && (
      <div className="  relative h-screen bg-gradient-to-b overflow-x-hidden">
        <Head>
          <title>Home - Movex</title>
          <meta name="movie app" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <Header />
        <main>
          <Banner />
          <section className=" flex flex-col space-y-2   mt-[50vh] xl:mt-[60vh] left-8 sm:left">
            <Row title="Trending" results={trending} />
            <Row title="Top Rated" results={topRated} />
            {/* <Row title="Trending" results={trending} /> */}
          </section>
        </main>

        <Plateforms />
        {/* <footer className="h-[20vh] px-20 sm:px-36 xl:px-53 pt-4 ">
        <h1 className=" text-3xl text-white font-bold tracking-wide select-none cursor-pointer pb-[2px] mr-4">
          MOVE<span className="text-yellow-300">X</span>
        </h1>
        <p className="mt-4 text-sm text-slate-500">Copyright Â© 2022 Movex</p>
      </footer> */}
        <Footer />
      </div>
    )
  );
}

export const getServerSideProps = async () => {
  //
  const trendingData = await fetch(requests.fetchTrending).then((res) =>
    res.json()
  );
  const topRatedData = await fetch(requests.fetchTopRated).then((res) =>
    res.json()
  );

  return {
    props: {
      trending: trendingData.results,
      topRated: topRatedData.results,
    },
  };
};
